{% extends 'base.html' %} {% block title %}Session Detail - AgriConnect{%
endblock %} {% block content %}
<div class="container py-4">
  <a
    class="text-decoration-none"
    href="{{ url_for('mentoring.mentor_dashboard') }}"
    ><i class="fas fa-arrow-left me-1"></i>Back to Dashboard</a
  >

  <div class="card mt-3 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <h3 class="mb-1">{{ session.title }}</h3>
          <div class="text-muted">
            Scheduled: {{ session.scheduled_time.strftime('%Y-%m-%d %H:%M') if
            session.scheduled_time else '' }}
          </div>
          <div class="mt-2">
            <span class="badge bg-{{ session.get_status_color() }}"
              >{{ session.status.replace('_', ' ').title() }}</span
            >
            <span class="badge bg-secondary"
              >{{ session.duration_minutes }} mins</span
            >
          </div>
        </div>
        {% if session.meeting_link %}
        <a
          href="{{ session.meeting_link }}"
          target="_blank"
          class="btn btn-primary"
        >
          <i class="fas fa-video me-1"></i> Join Meeting
        </a>
        {% endif %}
      </div>
      <hr />
      <div class="row">
        <div class="col-md-8">
          <h5>Description</h5>
          <p>{{ session.description or 'No description provided.' }}</p>

          <h5 class="mt-4">Notes</h5>
          <p>{{ session.notes or 'No notes added.' }}</p>
        </div>
        <div class="col-md-4">
          <div class="mb-3">
            <div class="small text-muted">Mentor User ID</div>
            <div>{{ session.mentor_id }}</div>
          </div>
          <div class="mb-3">
            <div class="small text-muted">Mentee User ID</div>
            <div>{{ session.mentee_id }}</div>
          </div>
          {% if current_user.is_authenticated and current_user.id ==
          session.mentor_id and session.status == 'scheduled' %}
          <form
            method="post"
            action="{{ url_for('mentoring.complete_session', session_id=session.id) }}"
          >
            <button class="btn btn-success w-100" type="submit">
              <i class="fas fa-check-circle me-1"></i>Mark Completed
            </button>
          </form>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
